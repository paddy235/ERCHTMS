@{;
ViewBag.Title = "表单页面";
Layout = "~/Views/Shared/_Form.cshtml";
}
<script src="~/Content/scripts/plugins/combo-select/jquery.combo.select.js"></script>
<link rel="stylesheet" href="~/Content/scripts/plugins/combo-select/combo.select.css">

<!--webUploader文件上传组件-->
<link href="~/content/scripts/plugins/webuploader/webuploader.css" rel="stylesheet" />
<link href="~/content/scripts/plugins/webuploader/webuploader-demo.css" rel="stylesheet" />
<script type="text/javascript" src="~/content/scripts/plugins/webuploader/webuploader.min.js"></script>
<script type="text/javascript" src="~/content/scripts/business/fileupload.js"></script>
<script>
    var orgId = request('orgId');
    var orgCode = request('orgCode');
    var keyValue = request('keyValue');
    var gxhs = "@(new ERCHTMS.Busines.SystemManage.DataItemDetailBLL().GetItemValue("广西华N版本"))";
    var isKBS  = '@(new ERCHTMS.Busines.SystemManage.DataItemDetailBLL().GetItemValue("IsKbs"))';
    $(function () {
        $("input").attr("readonly", "readonly");
        if (!!gxhs) {
            $("#trProjectManager").show();
        }
        else {
            $("#div8").hide();
        }

        if (!!isKBS) {
            $('#tab7').html("四措两案");
        }
        initControl();
        $("#OUTPROJECTID").attr("disabled", "disabled");
        $(".combo-arrow").remove();
        $("#tab3").click(function () {
            GetUntilGrid();
        })
        $("#tab4").click(function () {
            GetPeopleGrid();
        })
        $("#tab5").click(function () {
            GetCompact();

        })
        $("#tabCompart").click(function () {
            GetCompact();

            $("#divProtocol").css("display", "none");
            $("#divCompact").css("display", "");
        })
        $("#tabProtocol").click(function () {
            GetProtocol();
            $("#divCompact").css("display", "none");
            $("#divProtocol").css("display", "");
        })
        $("#tab6").click(function () {
            GetTechDisGrid();
        })
        $("#tab7").click(function () {
            GetSchemeGrid();
        })
        $("#tab8").click(function () {
            GetToolsGrid();
        })
        $("#tab9").click(function () {
            GetStartApplyfor();
        })
        $("#tab10").click(function () {
            GetSafetyEvaluate();
        })
        $("#tab11").click(function () {
            GetToolsGrid2();
        })
        $("#tab12").click(function () {
            GetYhGrid();
        })
        $("#tab13").click(function () {
            GetWzGrid();
        })
    });
    //隐患信息
    function GetYhGrid() {
        var url = '../../HiddenTroubleManage/HTBaseInfo/Index?engineerid=' + keyValue+'&mode=wbgcyh' ;
        $("#iframe3")[0].src = url;
    }
    //违章信息
    function GetWzGrid() {
        var url = '../../LllegalManage/LllegalRegister/SdIndex?engineerid=' + keyValue;
        $("#iframe4")[0].src = url;
    }
    //初始化控件
    function initControl() {
        $("#ENGINEERTYPE").ComboBox({
            url: "../../SystemManage/DataItemDetail/GetDataItemListJson",
            param: { EnCode: "ProjectType" },
            id: "ItemValue",
            text: "ItemName",
            description: "==请选择==",
            height: "200px"
        })
        $("#ENGINEERLEVEL").ComboBox({
            url: "../../SystemManage/DataItemDetail/GetDataItemListJson",
            param: { EnCode: "ProjectLevel" },
            id: "ItemValue",
            text: "ItemName",
            description: "==请选择==",
            height: "200px"
        })
        $("#ENGINEERSTATE").ComboBox({
            url: "../../SystemManage/DataItemDetail/GetDataItemListJson",
            param: { EnCode: "OutProjectState" },
            id: "ItemValue",
            text: "ItemName",
            description: "==请选择==",
            height: "200px"
        })
        //$("#ENGINEERAREA").ComboBoxTree({
        //    url: "../../BaseManage/District/GetTreeJson",
        //    param: { orgID: orgId, areaIds: "", planId: "" },
        //    id: "DistrictID",
        //    text: "DistrictName",
        //    description: "==请选择==",
        //    height: "200px"
        //})
        loadSendDept(orgId);
        //获取表单
        if (!!keyValue) {
            $.SetForm({
                url: "../../OutsourcingProject/Outsouringengineer/GetFormJson",
                param: { keyValue: keyValue },
                success: function (data) {
                    $("#form1").formDeserialize(data.data);
                    $("#OUTPROJECTID").ComboBox({
                        url: "../../BaseManage/Department/GetOutProjectBySendDeptId",
                        param: { orgid: orgId },
                        id: "DepartmentId",
                        text: "FullName",
                        description: "==请选择==",
                        height: "200px"
                    })
                    //$("#OUTPROJECTID").ComboBoxSetValue(data.data.OUTPROJECTID);
                    $("#form1").formDeserialize(data.proData);
                    $(".OUTPROJECTID").val(data.data.OUTPROJECTID);
                    $("#OUTPROJECTID").val(data.proData.OUTSOURCINGNAME);
                }
            });
        }
    }
    //发包部门+用工部门
    function loadSendDept(orgid) {
        //发包部门
        var json = JSON.stringify(
                  {
                      SelectMode: 0,
                      Mode: 44
                  }
                );
        $("#ENGINEERLETDEPTID").ComboBoxTree({
            url: "../../BaseManage/Department/GetDepartTreeJson",
            param: { json: json },
            id: "DepartmentId",
            text: "FullName",
            description: "==请选择==",
            height: "200px"
        }).bind("change", function () {
            clearSendDept();
            var value = $(this).attr('data-value');
            if (value == "" || value == null || value == undefined) {
                //select.html('');
                //select.append('<option value="">请输入外包单位或选择</option>');
                //$('.OUTPROJECTID').comboSelect();
                return;
            }
            $.SetForm({
                url: "../../BaseManage/Department/GetFormJson",
                param: { keyValue: $(this).attr('data-value') },
                success: function (data) {
                    $("#ENGINEERLETPEOPLE").val(data.Manager);
                    $("#ENGINEERLETPEOPLEPHONE").val(data.InnerPhone);
                }
            })
            $("#ENGINEERUSEDEPTID").ComboBoxSetValue($(this).attr('data-value'));
            $("#ENGINEERUSEDEPTID").trigger("change");

        });
        var select = $(".OUTPROJECTID");
        //外包单位
        $.ajax({
            url: "../../BaseManage/Department/GetOutProjectBySendDeptId",
            type: "GET",
            data: { orgid: orgid },
            dataType: "JSON",
            async: false,
            success: function (data) {
                select.html('');
                select.append('<option value="">请输入外包单位或选择</option>');
                if (data) {
                    for (var i = 0; i < data.length; i++) {
                        select.append('<option value="' + data[i].DepartmentId + '">' + data[i].FullName + '</option>');
                    }
                }
                //解决控件重新渲染 input id取不到的问题
                if (!$(".OUTPROJECTID").attr("id")) {
                    $(".OUTPROJECTID").attr("id", "OUTPROJECTID");
                }
                $('.OUTPROJECTID').comboSelect();
            }
        })
        ////用工部门
        //$("#ENGINEERUSEDEPTID").ComboBox({
        //    url: "../../BaseManage/Department/GetDeptListJson",
        //    param: { orgid: orgid },
        //    id: "DepartmentId",
        //    text: "FullName",
        //    description: "==请选择==",
        //    height: "200px"
        //}).bind("change", function () {
        //    $.SetForm({
        //        url: "../../BaseManage/Department/GetFormJson",
        //        param: { keyValue: $(this).attr('data-value') },
        //        success: function (data) {
        //            $("#USEDEPTPEOPLE").val(data.Manager);
        //            $("#USEDEPTPEOPPHONE").val(data.InnerPhone);
        //        }
        //    })
        //});
    }
    //单位信息
    function GetUntilGrid() {
        var selectedRowIndex = 0;
        var $gridTable = $('#untilTable');
        var queryJson = {
            orgCode: orgCode,
            outengineerid: keyValue
        }
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 170,
            url: "../../OutsourcingProject/Aptitudeinvestigateinfo/GetPageListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                { label: 'ID', name: 'id', index: 'ID', width: 100, align: 'center', sortable: false, hidden: true },
                {
                    label: '操作', name: 'oper', width: 100, align: 'center', sortable: false, formatter: function (cellvalue, options, rowObject) {
                        var html = "<a href=javascript:UntilView('" + rowObject.id + "')  title='查看'><i class='fa fa-eye'></i></a>";
                        return html;
                    }
                },
                { label: '外包单位', name: 'outsourcingname', index: 'outsourcingname', width: 200, align: 'center', sortable: true },
                { label: '外包工程', name: 'engineername', index: 'engineername', width: 250, align: 'center', sortable: true },
                { label: '申请人', name: 'createusername', index: 'createusername', width: 120, align: 'center', sortable: false },
                { label: '申请时间', name: 'createdate', index: 'createdate', width: 120, align: 'center', sortable: true, formatter: "date", formatoptions: { srcformat: 'Y-m-d', newformat: 'Y-m-d' } },
                { label: '审核部门', name: 'flowdeptname', index: 'flowdeptname', width: 150, align: 'center', sortable: true },
                { label: '审核状态', name: 'flowname', index: 'flowname', width: 150, align: 'center', sortable: true },
                { label: '审批人', name: 'auditpeople', index: 'auditpeople', width: 150, align: 'center', sortable: false },
                { label: '审批结果', name: 'auditresult', index: 'auditresult', width: 150, align: 'center', sortable: false },
                {
                    label: '审核流程是否完成', name: 'isover', index: 'isover', width: 100, align: 'center', sortable: true, formatter: function (cellvalue, options, rowObject) {
                        var content = "未完成";
                        var isover = rowObject.isauditover;
                        if (isover == "1") {
                            content = "已完成";
                        }
                        return content;
                    }
                }
            ],
            viewrecords: true,
            rowNum: 30,
            rowList: [30, 50, 100],
            pager: "#untilPager",
            sortname: 'createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true,
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.id).getGridParam('selrow');
            },
            gridComplete: function () {
                $('#' + this.id).setSelection(selectedRowIndex, false);
            }
        });
    }
    function UntilView(id) {
        var keyValue = id;
        if (checkedRow(keyValue)) {
            var dlg = dialogOpen({
                id: 'UntilForm',
                title: '查看资质审查',
                url: '/OutsourcingProject/Aptitudeinvestigateinfo/Form?keyValue=' + keyValue + "&mode=View&orgCode="+orgCode+"&orgId="+orgId+"&flag=proFiles",
                width: ($(top.window).width() - 100) + "px",
                height: ($(top.window).height() - 100) + "px",
                btn: ["关闭"],
                callBack: function (iframeId) {
                    top.layer.close(dlg);
                }
            })
        }
    }
    //人员资质审查信息
    function GetPeopleGrid() {
        var selectedRowIndex = 0;
        var $gridTable = $('#peopleTable');
        var queryJson = {
            orgCode: orgCode,
            outengineerid:keyValue
        }
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 170,
            url: "../../OutsourcingProject/Aptitudeinvestigateinfo/GetPagePeopleReviewListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                { label: 'ID', name: 'id', index: 'ID', width: 100, align: 'center', sortable: false, hidden: true },
                {
                    label: '操作', name: 'oper', width: 100, align: 'center', sortable: false, formatter: function (cellvalue, options, rowObject) {
                        var html = "<a href=javascript:f_view('" + rowObject.id + "')  title='查看'><i class='fa fa-eye'></i></a>";
                        //if (rowObject.isauditover == "0" && rowObject.issaveorcommit == "1") {
                        //    var roleList = roleNames.split(',');
                        //    for (var i = 0; i < roleList.length; i++) {
                        //        if (rowObject.nextauditrole.indexOf(roleList[i])>=0) {
                        //            if (currDeptId == rowObject.nextauditdeptid) {
                        //                html += "<a href=javascript:f_aduit('" + rowObject.id + "')  title='审核'><i class='fa fa-check'></i></a>";
                        //                break;
                        //            }
                        //        }
                        //    }
                        //}
                        //if (rowObject.issaveorcommit != "1" && rowObject.createuserid == currUserId) {
                        //    html += "<a href=javascript:btn_edit('" + rowObject.id + "')  title='修改'><i class='fa fa-pencil-square-o'></i></a>";
                        //    html += "<a href=javascript:btn_delete('" + rowObject.id + "')  title='删除'><i class='fa fa-trash-o'></i></a>";
                        //}
                        //if (rowObject.issaveorcommit == "0" && rowObject.createuserid == currUserId) {

                        //}
                        return html;
                    }
                },
                { label: '外包单位', name: 'outsourcingname', index: 'outsourcingname', width: 220, align: 'center', sortable: true },
                { label: '外包工程', name: 'engineername', index: 'engineername', width: 220, align: 'center', sortable: true },
                { label: '申请人', name: 'createusername', index: 'createusername', width: 120, align: 'center', sortable: false },
                { label: '申请时间', name: 'createdate', index: 'createdate', width: 120, align: 'center', sortable: true, formatter: "date", formatoptions: { srcformat: 'Y-m-d', newformat: 'Y-m-d' } },
                 { label: '审核部门', name: 'flowdeptname', index: 'flowdeptname', width: 150, align: 'center', sortable: true },
                { label: '审核状态', name: 'flowname', index: 'flowname', width: 150, align: 'center', sortable: true },
                { label: '审批人', name: 'auditpeople', index: 'auditpeople', width: 150, align: 'center', sortable: false },
                { label: '审批结果', name: 'auditresult', index: 'auditresult', width: 150, align: 'center', sortable: false },
                 {
                     label: '审核流程是否完成', name: 'isover', index: 'isover', width: 180, align: 'center', sortable: true, formatter: function (cellvalue, options, rowObject) {
                         var content = "未完成";
                         var isover = rowObject.isauditover;
                         if (isover == "1") {
                             content = "已完成";
                         }
                         return content;
                     }
                 }
            ],

            viewrecords: true,
            rowNum: 30,
            rowList: [30, 50, 100],
            pager: "#peopleTablePager",
            sortname: 'createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true,
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.id).getGridParam('selrow');
            },
            gridComplete: function () {
                $('#' + this.id).setSelection(selectedRowIndex, false);
            }
        })


        }
    //查看人员资质
    function f_view(id) {
        var keyValue = id;
        if (checkedRow(keyValue)) {
            var dlg = dialogOpen({
                id: 'PeopleForm',
                title: '查看人员资质审查',
                url: '/OutsourcingProject/Aptitudeinvestigateinfo/PeopleForm?keyValue=' + keyValue + "&mode=View&orgCode=" + orgCode + "&orgId=" + orgId + "&flag=proFiles",
                width: ($(top.window).width() - 100) + "px",
                height: ($(top.window).height() - 100) + "px",
                btn: ["关闭"],
                callBack: function (iframeId) {
                    top.layer.close(dlg);
                }
            })
        }
    }
    //合同
    function GetCompact() {
        var queryJson = {
            orgCode: orgCode,
            outengineerid: keyValue
        }
        var selectedRowIndex = 0;
        var $gridTable = $('#compactTable');
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 210,
            url: "../../OutsourcingProject/Compact/GetListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                 { label: '主键', name: 'id', hidden: true },
                {
                    label: '操作', name: 'oper', width: 150, align: 'center', sortable: false,
                    formatter: function (cellvalue, options, rowObject) {
                        var html = "<a href=javascript:show('" + rowObject.id + "','1')  title='查看'><i class='fa fa-eye'></i></a>";
                        return html;
                    }
                },
                { label: '外包工程', name: 'engineername', index: 'engineername', width: 450, align: 'center', sortable: true },
                { label: '外包单位', name: 'fullname', index: 'fullname', width: 450, align: 'center', sortable: true },
                { label: '合同生效时间', name: 'compacttakeeffectdate', index: 'compacttakeeffectdate', width: 300, align: 'center', sortable: true },
                { label: '合同终止时间', name: 'compacteffectivedate', index: 'compacteffectivedate', width: 300, align: 'center', sortable: true }],
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.id).getGridParam('selrow');
            },
            gridComplete: function () {
                $('#' + this.id).setSelection(selectedRowIndex, false);
            },
            viewrecords: true,
            rowNum: 15,
            rowList: [15, 30, 50],
            pager: "#compactTablePager",
            sortname: 't.createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true
        });
    }
    //查看合同与协议
    function show(id, type) {
        var keyValue = id;
        var title = "查看合同";
        var url = "/OutsourcingProject/Compact/Form?orgCode=" + orgCode + "&orgId=" + orgId + "&flag=proFiles&keyValue=";
        if (type == "0") {
            title = "查看安全管理协议";
            url = "/OutsourcingProject/Protocol/Form?orgCode=" + orgCode + "&orgId=" + orgId + "&flag=proFiles&keyValue=";
        }
        if (checkedRow(keyValue)) {
            var dlg = dialogOpen({
                id: "ComForm",
                title: title,
                url: url + keyValue + '&actiontype=view',
                width: "800px",
                height: ($(top.window).height() - 150) + "px",
                btn: ["关闭"],
                callBack: function (iframeId) {
                    top.layer.close(dlg);
                }
            });
        }
    }
    //协议
    function GetProtocol() {
        var selectedRowIndex = 0;
        var queryJson = {
            orgCode: orgCode,
            outengineerid: keyValue
        }
        var $gridTable = $('#ProtocolTable');
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 210,
            url: "../../OutsourcingProject/Protocol/GetListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                { label: '主键', name: 'id', hidden: true },
            {
                label: '操作', name: 'oper', width: 100, align: 'center', sortable: false,
                formatter: function (cellvalue, options, rowObject) {
                    var html = "<a href=javascript:show('" + rowObject.id + "','0')  title='查看'><i class='fa fa-eye'></i></a>";
                    return html;
                }
            },
                { label: '外包工程', name: 'engineername', index: 'engineername', width: 200, align: 'center', sortable: true },
                { label: '外包单位', name: 'fullname', index: 'fullname', width: 200, align: 'center', sortable: true },
                { label: '甲方签订单位/人', name: 'firstparty', index: 'firstparty', width: 100, align: 'center', sortable: true },
                { label: '乙方签订单位/人', name: 'secondparty', index: 'secondparty', width: 100, align: 'center', sortable: true },
                { label: '签订地点', name: 'signplace', index: 'signplace', width: 100, align: 'center', sortable: true },
                { label: '签订时间', name: 'signdate', index: 'signdate', width: 100, align: 'center', sortable: true }],
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.id).getGridParam('selrow');
            },
            gridComplete: function () {
                $('#' + this.id).setSelection(selectedRowIndex, false);
            },
            viewrecords: true,
            rowNum: 15,
            rowList: [15, 30, 50],
            pager: "#ProtocolPager",
            sortname: 't.createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true
        });
    }
    //安全技术交底
    function GetTechDisGrid() {
        var queryJson = {
            orgCode: orgCode,
            outengineerid: keyValue
        }
        var selectedRowIndex = 0;
        var $gridTable = $('#TechDisTable');
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 170,
            url: "../../OutsourcingProject/TechDisclosure/GetListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                { label: '主键', name: 'id', hidden: true },
                {
                    label: '操作', name: 'oper', width: 100, align: 'center', sortable: false,
                    formatter: function (cellvalue, options, rowObject) {
                        var html = "<a href=javascript:TechDisShow('" + rowObject.id + "','" + rowObject.engineerid + "')  title='查看'><i class='fa fa-eye'></i></a>";
                        //if (UserId == rowObject.createuserid) {
                        //    html += "<a href=javascript:btn_edit('" + rowObject.id + "','" + rowObject.engineerid + "')  title='修改'><i class='fa fa-pencil-square-o'></i></a>";
                        //    html += "<a href=javascript:btn_delete('" + rowObject.id + "')  title='删除'><i class='fa fa-trash-o'></i></a>";
                        //}
                        return html;
                    }
                },
                    { label: '外包工程', name: 'engineername', index: 'engineername', width: 200, align: 'center', sortable: true },
                    { label: '外包单位', name: 'fullname', index: 'fullname', width: 200, align: 'center', sortable: true },
                { label: '交底类型', name: 'disclosuretype', index: 'disclosuretype', width: 120, align: 'center', sortable: true },
                { label: '交底时间', name: 'disclosuredate', index: 'disclosuredate', width: 100, align: 'center', sortable: true },
                { label: '交底人数', name: 'disclosurepersonnum', index: 'disclosurepersonnum', width: 80, align: 'center', sortable: true },
                { label: '交底地点', name: 'disclosureplace', index: 'disclosureplace', width: 150, align: 'center', sortable: true },
                { label: '交底人', name: 'disclosureperson', index: 'disclosureperson', width: 100, align: 'center', sortable: true },
                { label: '接收交底人', name: 'receiveperson', index: 'receiveperson', width: 200, align: 'center', sortable: true }],
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.id).getGridParam('selrow');
            },
            gridComplete: function () {
                $('#' + this.id).setSelection(selectedRowIndex, false);
            },
            viewrecords: true,
            rowNum: 15,
            rowList: [15, 30, 50],
            pager: "#TechDisPager",
            sortname: 't.createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true
        });
    }
    //查看安全技术交底
    function TechDisShow(id, engineerid) {
        var keyValue = id;
        var title = "查看安全技术交底";
        var url = "/OutsourcingProject/TechDisclosure/Form?orgCode=" + orgCode + "&orgId=" + orgId + "&flag=proFiles&keyValue=";
        if (checkedRow(keyValue)) {
            var dlg = dialogOpen({
                id: "TechForm",
                title: title,
                url: url + keyValue + '&actiontype=view' + "&engineerid=" + engineerid,
                width: "800px",
                height: ($(top.window).height() - 150) + "px",
                btn: ["关闭"],
                callBack: function (iframeId) {
                    top.layer.close(dlg);
                }
            });
        }
    }
    //三措两案
    function GetSchemeGrid() {
        var queryJson = {
            orgCode: orgCode,
            outengineerid: keyValue
        }
        var selectedRowIndex = 0;
        var $gridTable = $('#SchemeTable');
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 170,
            url: "../../OutsourcingProject/SchemeMeasure/GetListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                 { label: '主键', name: 'id', hidden: true },
                {
                    label: '操作', name: 'oper', width: 100, align: 'center', sortable: false,
                    formatter: function (cellvalue, options, rowObject) {

                        var html = "<a href=javascript:SchemeShow('" + rowObject.id + "','" + rowObject.engineerid + "','" + rowObject.issaved + "')  title='查看'><i class='fa fa-eye'></i></a>&nbsp;";

                        return html;
                    }
                },
                { label: '外包工程', name: 'engineername', index: 'engineername', width: 300, align: 'center', sortable: true },
                { label: '外包单位', name: 'fullname', index: 'fullname', width: 300, align: 'center', sortable: true },
                {
                    label: '方案措施', name: 'filenum', index: 'filenum', width: 200, align: 'center', sortable: true, formatter: function (cellvalue, options, rowObject) {
                        var html = "<a href=javascript:GetFile('" + rowObject.id + "')  style='text-decoration:underline;color:blue;' >" + cellvalue + "</a>";
                        return html;
                    }
                },
                { label: '审核部门', name: 'flowdeptname', index: 'flowdeptname', width: 150, align: 'center', sortable: true },
                { label: '审核状态', name: 'flowname', index: 'flowname', width: 150, align: 'center', sortable: true },
                {
                    label: '流程是否完成', name: 'isover', index: 'isover', width: 100, align: 'center', sortable: true, formatter: function (cellvalue, options, rowObject) {
                        var content = "未完成";
                        var isover = rowObject.isover;
                        if (isover == "1") {
                            content = "已完成";
                        }
                        return content;
                    }
                }],
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.id).getGridParam('selrow');
            },
            gridComplete: function () {
                $('#' + this.id).setSelection(selectedRowIndex, false);
            },
            viewrecords: true,
            rowNum: 15,
            rowList: [15, 30, 50],
            pager: "#SchemePager",
            sortname: 't.createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true
        });
    }
    //查看维护记录附件
    function GetFile(keyValue) {
        //if (state != keyValue) {
        //    state = keyValue;
        //}
        $("#modalBody").html("");
        var html = '<div id="uploader" class="uploader" style="border:1px solid #ccc; margin-top:10px; min-height:200px; margin-bottom:10px;"><div class="queueList">';
        html += '<div id="dndArea1" class="placeholder">';
        html += '<div class="filePicker" style="margin-left:25px; margin-top:10px;"></div></div></div>';
        html += '<div class="statusBar" style="display:none;">';
        html += ' <div class="progress">';
        html += '<span class="text">0%</span>';
        html += '<span class="percentage"></span>';
        html += '</div>';
        html += '<div class="info"></div>';
        html += '</div>';
        html += '</div>';
        $("#modalBody").append(html);

        //绑定附件
        file_upload.bindFiles(false, false, keyValue, "uploader", false);
        $("#MaintainingRecordFile").modal('show');

    }

    function SchemeShow(id, engineerid, issaved) {
        var keyValue = id;
        var title = "查看方案措施";
        var url = "";
        //登记情况下查看审核的详情
        if (issaved == "0") {
            url = "/OutsourcingProject/SchemeMeasure/Form?orgCode=" + orgCode + "&orgId=" + orgId + "&flag=proFiles&keyValue=";

        } else {  //非登记状态下查看
            url = "/OutsourcingProject/SchemeMeasure/ApproveForm?orgCode=" + orgCode + "&orgId=" + orgId + "&flag=proFiles&keyValue=";
        }
        if (checkedRow(keyValue)) {
            var dlg = dialogOpen({
                id: "SchemeForm",
                title: title,
                url: url + keyValue + '&actiontype=view' + "&engineerid=" + engineerid,
                width: ($(top.window).width() - 200) + "px",
                height: ($(top.window).height() - 150) + "px",
                btn: null,
                callBack: function (iframeId) {
                    top.layer.close(dlg);
                }
            });
        }
    }


    function GetToolsGrid() {
        var queryJson = {
            orgCode: orgCode,
            outengineerid: keyValue,
            equiptype:"2"
        }
        var selectedRowIndex = 0;
        var $gridTable = $('#spToolsTable');
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 170,
            url: "../../OutsourcingProject/ToolsCheckMain/GetToolsCheckPageListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                { label: '主键', name: 'id', hidden: true },
                {
                    label: '操作', name: 'oper', width: 100, align: 'center', sortable: false,
                    formatter: function (cellvalue, options, rowObject) {
                        var html = "<a href=javascript:btn_ptview('" + rowObject.toolsid + "')  title='查看'><i class='fa fa-eye'></i></a>";
                        return html;
                    }
                },
                { label: 'toolsid', name: 'toolsid', index: 'toolsid', width: 80, align: 'center', sortable: false, hidden: true },
                { label: 'outprojectid', name: 'outprojectid', index: 'outprojectid', width: 80, align: 'center', sortable: false, hidden: true },
                { label: 'outengineerid', name: 'outengineerid', index: 'outengineerid', width: 80, align: 'center', sortable: false, hidden: true },
                { label: '外包工程', name: 'engineername', index: 'ENGINEERNAME', width: 330, align: 'center', sortable: false },
                { label: '外包单位', name: 'fullname', index: 'OUTSOURCINGNAME', width: 330, align: 'center', sortable: false },
                { label: '申请时间', name: 'applytime', index: 'APPLYTIME', width: 150, align: 'center', sortable: false },
                { label: '申请人', name: 'applypeopel', index: 'APPLYPEOPEL', width: 180, align: 'center', sortable: false },
                { label: '审核部门', name: 'flowdeptname', index: 'flowdeptname', width: 150, align: 'center', sortable: true },
                { label: '审核状态', name: 'flowname', index: 'flowname', width: 150, align: 'center', sortable: true },
                {
                    label: '流程是否完成', name: 'isover', index: 'isover', width: 100, align: 'center', sortable: true, formatter: function (cellvalue, options, rowObject) {
                        var content = "未完成";
                        var isover = rowObject.isover;
                        if (isover == "1") {
                            content = "已完成";
                        }
                        return content;
                    }
                }],
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.toolsid).getGridParam('selrow');
            },
            viewrecords: true,
            rowNum: 15,
            rowList: [15, 30, 50],
            pager: "#spToolsgridPager",
            sortname: 'createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true

        });
    }

    function GetToolsGrid2() {
        var queryJson = {
            orgCode: orgCode,
            outengineerid: keyValue,
            equiptype: "1"
        }
        var selectedRowIndex = 0;
        var $gridTable = $('#ptToolsTable');
        $gridTable.jqGrid({
            autowidth: true,
            height: $(window).height() - 170,
            url: "../../OutsourcingProject/ToolsCheckMain/GetToolsCheckPageListJson",
            postData: { queryJson: JSON.stringify(queryJson) },
            datatype: "json",
            colModel: [
                { label: '主键', name: 'id', hidden: true },
                {
                    label: '操作', name: 'oper', width: 100, align: 'center', sortable: false,
                    formatter: function (cellvalue, options, rowObject) {
                        var html = "<a href=javascript:btn_view('" + rowObject.toolsid + "')  title='查看'><i class='fa fa-eye'></i></a>";
                        return html;
                    }
                },
                { label: 'toolsid', name: 'toolsid', index: 'toolsid', width: 80, align: 'center', sortable: false, hidden: true },
                { label: 'outprojectid', name: 'outprojectid', index: 'outprojectid', width: 80, align: 'center', sortable: false, hidden: true },
                { label: 'outengineerid', name: 'outengineerid', index: 'outengineerid', width: 80, align: 'center', sortable: false, hidden: true },
                { label: '外包工程', name: 'engineername', index: 'ENGINEERNAME', width: 330, align: 'center', sortable: false },
                { label: '外包单位', name: 'fullname', index: 'OUTSOURCINGNAME', width: 330, align: 'center', sortable: false },
                { label: '申请时间', name: 'applytime', index: 'APPLYTIME', width: 150, align: 'center', sortable: false },
                { label: '申请人', name: 'applypeopel', index: 'APPLYPEOPEL', width: 180, align: 'center', sortable: false },
                { label: '审核部门', name: 'flowdeptname', index: 'flowdeptname', width: 150, align: 'center', sortable: true },
                { label: '审核状态', name: 'flowname', index: 'flowname', width: 150, align: 'center', sortable: true },
                {
                    label: '流程是否完成', name: 'isover', index: 'isover', width: 100, align: 'center', sortable: true, formatter: function (cellvalue, options, rowObject) {
                        var content = "未完成";
                        var isover = rowObject.isover;
                        if (isover == "1") {
                            content = "已完成";
                        }
                        return content;
                    }
                }],
            onSelectRow: function () {
                selectedRowIndex = $('#' + this.toolsid).getGridParam('selrow');
            },
            viewrecords: true,
            rowNum: 15,
            rowList: [15, 30, 50],
            pager: "#ptToolsgridPager",
            sortname: 'createdate',
            sortorder: 'desc',
            rownumbers: true,
            shrinkToFit: false,
            gridview: true

        });
    }
    function btn_view(id) {
        var keyValue = id;
        if (checkedRow(keyValue)) {
            var dlg = dialogOpen({
                id: "SpToolsForm",
                title: '查看设备工器具验收',
                url: '/OutsourcingProject/ToolsCheckMain/ToolCheckFroms?orgCode=' + orgCode + '&orgId=' + orgId + '&flag=proFiles&keyValue=' + keyValue + '&actiontype=view',
                //param: { orgCode: orgCode, orgId: orgId, flag: "proFiles", actiontype: "view", keyValue: keyValue },
                width: "1000px",
                height: ($(top.window).height() - 150) + "px",
                btn: ["关闭"],
                callBack: function (iframeId) {
                    top.layer.close(dlg);
                }
            });
        }
    }
    function btn_ptview(id) {
        var keyValue = id;
        if (checkedRow(keyValue)) {
            var dlg = dialogOpen({
                id: "ToolsForm",
                title: '查看设备工器具验收',
                url: '/OutsourcingProject/ToolsCheckMain/ToolCheckFromsSp?orgCode=' + orgCode + '&orgId=' + orgId + '&flag=proFiles&keyValue=' + keyValue + '&actiontype=view',
                //param: { orgCode: orgCode, orgId: orgId, flag: "proFiles", actiontype: "view", keyValue: keyValue },
                width: "1000px",
                height: ($(top.window).height() - 150) + "px",
                btn: ["关闭"],
                callBack: function (iframeId) {
                    top.layer.close(dlg);
                }
            });
        }
    }
    //开工申请
    function GetStartApplyfor() {
        var startId = "";
        $.SetForm({
            url: "../../OutsourcingProject/Startapplyfor/GetStartApplyByProjectId",
            param: { id: keyValue },
            success: function (data) {
                if (data != null) {
                    startId = data.ID;
                    var url = '../../OutsourcingProject/Startapplyfor/Form?orgCode=' + orgCode + '&orgId=' + orgId + '&flag=proFiles&keyValue=' + startId + '&actiontype=view';
                    $("#iframe1")[0].src = url;
                } else {
                    var url = '../../OutsourcingProject/Startapplyfor/Form?keyValue=&actiontype=view';
                    $("#iframe1")[0].src = url;
                }

            }
        })
    }
    //安全评价
    function GetSafetyEvaluate() {
        var SafetId = "";
        $.SetForm({
            url: "../../OutsourcingProject/SafetyEvaluate/GetSafetyByProjectId",
            param: { id: keyValue },
            success: function (data) {
                if (data != null) {
                    SafetId = data.ID;
                    var url = '../../OutsourcingProject/SafetyEvaluate/Form?orgCode=' + orgCode + '&orgId=' + orgId + '&flag=proFiles&keyValue=' + SafetId + "&actiontype=view";
                    $("#iframe2")[0].src = url;
                } else {
                    var url = '../../OutsourcingProject/SafetyEvaluate/Form?keyValue=&actiontype=view';
                    $("#iframe2")[0].src = url;
                }

            }
        })
    }

</script>
<div style="margin-left: 10px; margin-right: 10px;">
    <ul class="nav nav-tabs">
        <li class="active"><a id="tab1"  href="#div1" data-toggle="tab">工程基本信息</a></li>
        <li><a id="tab2" href="#div2" data-toggle="tab">外包单位基本信息</a></li>
        <li><a id="tab3" href="#div3" data-toggle="tab">单位资质</a></li>
        <li><a id="tab4" href="#div4" data-toggle="tab">人员资质</a></li>
        <li><a id="tab5" href="#div5" data-toggle="tab">合同与协议</a></li>
        <li><a id="tab6" href="#div6" data-toggle="tab">安全技术交底</a></li>
        <li><a id="tab7" href="#div7" data-toggle="tab">三措两案</a></li>
        <li><a id="tab8" href="#div8" data-toggle="tab">特种设备验收</a></li>
        <li><a id="tab11" href="#div11" data-toggle="tab">安全/电动工器具验收</a></li>
        <li><a id="tab9" href="#div9" data-toggle="tab">开工申请</a></li>
        <li><a id="tab10" href="#div10" data-toggle="tab">安全评价</a></li>
        <li><a id="tab12" href="#div12" data-toggle="tab">隐患信息</a></li>
        <li><a id="tab13" href="#div13" data-toggle="tab">违章信息</a></li>
    </ul>
    <div class="tab-content" style="padding-top: 15px;">
        <!--工程信息-->
        <div id="div1" class="tab-pane active" style="padding-right: 30px;">
            <table class="form">
                <tr>
                    <td class="formTitle" style="width:150px;">外包工程名称<font face="宋体">*</font></td>
                    <td class="formValue">
                        <input id="ENGINEERNAME" type="text" class="form-control" isvalid="yes" checkexpession="NotNull" />
                    </td>
                    <td class="formTitle" style="width:120px">工程编号</td>
                    <td class="formValue">
                        <input id="ENGINEERCODE" type="text" readonly="readonly" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">所属区域<font face="宋体">*</font></td>
                    <td class="formValue">
                        <input id="EngAreaName" type="text" readonly="readonly" class="form-control" />
                       @* <div id="ENGINEERAREA" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>*@
                    </td>
                    <td class="formTitle">工程类型<font face="宋体">*</font></td>
                    <td class="formValue">
                        <div id="ENGINEERTYPE" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">工程风险等级<font face="宋体">*</font></td>
                    <td class="formValue">
                        <div id="ENGINEERLEVEL" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>
                    </td>
                    <td class="formTitle">工程规模(万元)<font face="宋体">*</font></td>
                    <td class="formValue">
                        <input id="ENGINEERSCALE" type="text" class="form-control" isvalid="yes" checkexpession="Double" />
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">安全保证金(万元)<font face="宋体">*</font></td>
                    <td class="formValue">
                        <input id="ENGINEERCASHDEPOSIT" type="text" class="form-control" isvalid="yes" checkexpession="Double" />
                    </td>
                    <td class="formTitle">责任部门<font face="宋体">*</font></td>
                    <td class="formValue">
                        <div id="ENGINEERLETDEPTID" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">责任部门负责人<font face="宋体">*</font></td>
                    <td class="formValue">
                        <input id="ENGINEERLETPEOPLE" type="text" class="form-control" isvalid="yes" checkexpession="NotNull" />
                    </td>
                    <td class="formTitle">责任部门负责人电话<font face="宋体">*</font></td>
                    <td class="formValue">
                        <input id="ENGINEERLETPEOPLEPHONE" type="text" class="form-control" isvalid="yes" checkexpession="NotNull" />
                    </td>
                </tr>
                @*<tr>
                    <td class="formTitle" style="display:none;">用工部门</td>
                    <td class="formValue">
                        <div id="ENGINEERUSEDEPTID" type="select" class="ui-select" style="display:none;" ></div>
                    </td>
                    <td class="formTitle" style="display:none;">用工部门负责人</td>
                    <td class="formValue">
                        <input id="USEDEPTPEOPLE" type="text" class="form-control" style="display:none;" />
                    </td>
                </tr>*@
                <tr>
                    @*<td class="formTitle">用工负责人电话</td>
                    <td class="formValue">
                        <input id="USEDEPTPEOPPHONE" type="text" style="display:none;" class="form-control"  />
                    </td>*@
                    <td class="formTitle">工程状态</td>
                    <td class="formValue">
                        <div id="ENGINEERSTATE" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>
                    </td>
                    <td class="formTitle">监理单位</td>
                    <td class="formValue">
                        <div class="input-group" style="width:100%">
                            <input type="text" class="form-control" id="SupervisorName" />
                            <input type="hidden" id="Supervisor" />
                        </div>

                        @*<span id="ChooseRiskDesc" class="input-group-addon" onclick="selUnit();" title="选择单位"><i class="fa fa-check"></i></span>*@
                        @*<select id="OUTPROJECTID" class="OUTPROJECTID"></select>*@
                        @* <div id="OUTPROJECTID" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>*@
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">预计工期</td>
                    <td class="formValue">
                        <input id="PREDICTTIME" type="text" class="form-control" />
                    </td>
                    <td class="formTitle">实际工期</td>
                    <td class="formValue">
                        <input id="PRACTICALTIME" type="text" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">计划开工时间</td>
                    <td class="formValue">
                        <input id="PLANSTARTDATE" type="text" class="form-control input-datepicker" onfocus="WdatePicker({ dateFmt: 'yyyy-MM-dd' })" />
                    </td>
                    <td class="formTitle">实际开工时间</td>
                    <td class="formValue">
                        <input id="PLANENDDATE" type="text" class="form-control input-datepicker" onfocus="WdatePicker({ dateFmt: 'yyyy-MM-dd' })" />
                    </td>

                </tr>
                <tr>
                    <td class="formTitle">计划完工时间</td>
                    <td class="formValue">
                        <input id="ACTUALSTARTDATE" type="text" class="form-control input-datepicker" onfocus="WdatePicker({ dateFmt: 'yyyy-MM-dd' })" />
                    </td>
                    <td class="formTitle">实际完工时间</td>
                    <td class="formValue">
                        <input id="ACTUALENDDATE" type="text" class="form-control input-datepicker" onfocus="WdatePicker({ dateFmt: 'yyyy-MM-dd' })" />
                    </td>

                </tr>
                <tr>
                    <td class="formTitle">外包单位<font face="宋体">*</font></td>
                    <td class="formValue">
                        <select id="OUTPROJECTID" class="OUTPROJECTID"></select>
                       @* <div id="OUTPROJECTID" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>*@
                    </td>
                    <td class="formTitle">外包单位类型<font face="宋体">*</font></td>
                    <td class="formValue">
                        <select class="form-control" id="DeptType" isvalid="yes" checkexpession="NotNull">
                            <option value=""></option>
                            <option value="长协">长协</option>
                            <option value="临时">临时</option>
                        </select>

                        @*<div id="DeptType" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>*@
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">外包单位工程负责人</td>
                    <td class="formValue">
                        <input id="ENGINEERDIRECTOR" type="text" class="form-control" />
                    </td>
                    <td class="formTitle">外包单位工程负责人电话</td>
                    <td class="formValue">
                        <input id="ENGINEERDIRECTORPHONE" type="text" isvalid="yes" checkexpession="MobileOrPhoneOrNull" class="form-control" />
                    </td>
                   
                </tr>
                <tr>
                    <td class="formTitle">外包单位现场负责人</td>
                    <td class="formValue">
                        <input id="UnitSuper" type="text" class="form-control" />
                    </td>
                    <td class="formTitle">外包单位现场负责人电话</td>
                    <td class="formValue">
                        <input id="UnitSuperPhone" type="text" class="form-control" />
                    </td>
                    
                </tr>
                <tr id="trProjectManager" style="display:none">
                    <td class="formTitle">项目经理</td>
                    <td class="formValue">
                        <input id="ProjectManager" type="text" class="form-control" />
                    </td>
                    <td class="formTitle">项目经理电话</td>
                    <td class="formValue">
                        <input id="ProjectManagerTel" type="text" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">外包单位安全负责人</td>
                    <td class="formValue">
                        <input id="SafetyModerator" type="text" class="form-control" />
                    </td>
                    <td class="formTitle">外包单位安全负责人电话</td>
                    <td class="formValue">
                        <input id="SafetyModeratorTel" type="text" class="form-control" />
                    </td>
                </tr>
                @*<tr>
                    <td class="formTitle">外包单位<font face="宋体">*</font></td>
                    <td class="formValue">
                        <div id="OUTPROJECTID" type="select" class="ui-select" isvalid="yes" checkexpession="NotNull"></div>
                    </td>
                    <td class="formTitle">工程负责人</td>
                    <td class="formValue">
                        <input id="ENGINEERDIRECTOR" type="text" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">工程负责人电话</td>
                    <td class="formValue">
                        <input id="ENGINEERDIRECTORPHONE" type="text" class="form-control" />
                    </td>
                    <td class="formTitle">安全管理人数</td>
                    <td class="formValue">
                        <input id="SAFEMANAGERPEOPLE" type="text" class="form-control" />
                    </td>

                </tr>*@
                <tr>
                    <td class="formTitle">安全管理人数</td>
                    <td class="formValue">
                        <input id="SAFEMANAGERPEOPLE" type="text" isvalid="yes" checkexpession="PositiveNumOrNull" class="form-control" />
                    </td>
                    <td class="formTitle">工程作业人数</td>
                    <td class="formValue">
                        <input id="ENGINEERWORKPEOPLE" type="text" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">工程技术人数</td>
                    <td class="formValue">
                        <input id="ENGINEERTECHPERSON" type="text" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td class="formTitle">工程内容<font face="宋体">*</font></td>
                    <td class="formValue" colspan='3'>
                        <textarea id="ENGINEERCONTENT" class="form-control" isvalid="yes" style="height:80px;" maxlength="2000" checkexpession="NotNull"></textarea>
                    </td>
                </tr>


            </table>
        </div>
        <!--单位基本信息-->
        <div id="div2" class="tab-pane">
            <div class="center-Panel">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <strong>&nbsp;&nbsp;单位基本信息</strong>
                        <span class="tools pull-right">
                            <a class="fa fa-chevron-down" title="展开/收起"></a>
                        </span>
                    </div>
                    <div class="panel-body">
                        <table class="form">
                            <tr>
                                <td class="formTitle">外包单位名称</td>
                                <td class="formValue">
                                    <input id="OUTSOURCINGNAME" type="text" class="form-control" readonly="readonly" />
                                </td>
                                <td class="formTitle">统一社会信用代码</td>
                                <td class="formValue">
                                    <input id="CREDITCODE" type="text" class="form-control" readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td class="formTitle">法人代表</td>
                                <td class="formValue">
                                    <input id="LEGALREP" type="text" class="form-control" readonly="readonly" />
                                </td>
                                <td class="formTitle">法人代表电话</td>
                                <td class="formValue">
                                    <input id="LEGALREPPHONE" type="text" class="form-control" readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td class="formTitle">法人代表传真</td>
                                <td class="formValue">
                                    <input id="LEGALREPFAX" type="text" class="form-control" readonly="readonly" />
                                </td>
                                <td class="formTitle">联系人</td>
                                <td class="formValue">
                                    <input id="LINKMAN" type="text" class="form-control" readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td class="formTitle">联系人电话</td>
                                <td class="formValue">
                                    <input id="LINKMANPHONE" type="text" class="form-control" readonly="readonly" />
                                </td>
                                <td class="formTitle">联系人传真</td>
                                <td class="formValue">
                                    <input id="LINKMANFAX" type="text" class="form-control" readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td class="formTitle">电子邮箱</td>
                                <td class="formValue">
                                    <input id="EMAIL" type="text" class="form-control" readonly="readonly" />
                                </td>
                                <td class="formTitle">企业地址</td>
                                <td class="formValue">
                                    <input id="ADDRESS" type="text" class="form-control" readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td class="formTitle">外包单位概况</td>
                                <td class="formValue" colspan='3'>
                                    <textarea id="GENERALSITUATION" class="form-control" readonly="readonly"></textarea>
                                </td>
                            </tr>

                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!--单位资质-->
        <div id="div3" class="tab-pane">
            <div class="gridPanel">
                <table id="untilTable"></table>
                <div id="untilPager"></div>
            </div>
        </div>
        <!--人员资质-->
        <div id="div4" class="tab-pane">
            <div class="gridPanel">
                <table id="peopleTable"></table>
                <div id="peopleTablePager"></div>
            </div>
        </div>
        <!--合同与协议-->
        <div id="div5" class="tab-pane">
            <div class="titlePanel">
                <ul class="nav nav-tabs">
                    <li class="active"><a id="tabCompart" href="#divCompact" data-toggle="tab">合同</a></li>
                    <li><a id="tabProtocol" href="#divProtocol" data-toggle="tab">安全管理协议</a></li>
                </ul>
            </div>
            <div id="divCompact" class="tab-pane">
                <div class="gridPanel">
                    <table id="compactTable"></table>
                    <div id="compactTablePager"></div>
                </div>
            </div>
            <div id="divProtocol" class="tab-pane">
                <div class="gridPanel" >
                    <table id="ProtocolTable"></table>
                    <div id="ProtocolPager"></div>
                </div>
            </div>
            </div>
        <!--安全技术交底-->
        <div id="div6" class="tab-pane">
            <div class="gridPanel">
                <table id="TechDisTable"></table>
                <div id="TechDisPager"></div>
            </div>
        </div>
        <!--三措两案-->
        <div id="div7" class="tab-pane">
            <div class="gridPanel">
                <table id="SchemeTable"></table>
                <div id="SchemePager"></div>
            </div>
            <div class="modal" id="MaintainingRecordFile">
                <div class="modal-dialog" style="width:600px;">
                    <div class="modal-content" style="text-align:center;">
                        <div class="modal-header">
                            <h5>查看方案措施</h5>
                        </div>
                        <div class="modal-body" id="modalBody">
                        </div>
                        <div class="modal-footer">
                            <button id="btnModal" type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--普通设备-->
        <div id="div11" class="tab-pane">
            <div class="gridPanel">
                <table id="ptToolsTable"></table>
                <div id="ptToolsgridPager"></div>
            </div>
        </div>
        <!--特种设备-->
        <div id="div8" class="tab-pane">
            <div class="gridPanel">
                <table id="spToolsTable"></table>
                <div id="spToolsgridPager"></div>
            </div>
        </div>
        <!--开工申请-->
        <div id="div9" style="height:100%;" class="tab-pane">
          <iframe id="iframe1" style="border:none; height:800px;width:100%" ></iframe>
        </div>
        <!--安全评价-->
        <div id="div10" class="tab-pane">
            <iframe id="iframe2" style="border:none; height:800px;width:100%"></iframe>
        </div>
        <!--隐患信息-->
        <div id="div12" class="tab-pane">
            <iframe id="iframe3" style="border:none; height:800px;width:100%"></iframe>
        </div>
        <!--违章信息-->
        <div id="div13" class="tab-pane">
            <iframe id="iframe4" style="border:none; height:800px;width:100%"></iframe>
        </div>
    </div>
</div>
